{"ast":null,"code":"var _jsxFileName = \"D:\\\\ITSS\\\\frontend\\\\src\\\\page\\\\Map.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, useMap } from 'react-leaflet';\nimport { Box, Typography, Alert, CircularProgress } from '@mui/material';\nimport 'leaflet/dist/leaflet.css'; // **RẤT QUAN TRỌNG: Import CSS của Leaflet**\n\n// Fix marker icon (Leaflet cần các đường dẫn tĩnh cho marker)\nimport L from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png'\n});\n\n// Vị trí mặc định (Ví dụ: Hà Nội)\nconst DEFAULT_CENTER = {\n  lat: 21.028511,\n  lng: 105.804817\n};\n\n// Style cho MapContainer\nconst CONTAINER_STYLE = {\n  height: '600px',\n  width: '100%'\n};\n\n// Component con để điều khiển bản đồ\nconst MapController = ({\n  center\n}) => {\n  _s();\n  const map = useMap(); // Hook để truy cập instance của bản đồ\n\n  // Khi vị trí thay đổi, di chuyển bản đồ đến vị trí mới\n  useEffect(() => {\n    if (center.lat && center.lng) {\n      map.setView(center, 16); // Di chuyển và phóng to (zoom level 16)\n    }\n  }, [center, map]);\n  return null;\n};\n_s(MapController, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = MapController;\nconst MapComponent = () => {\n  _s2();\n  const [position, setPosition] = useState(DEFAULT_CENTER);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // ----------------------------------------------------\n  // Lấy vị trí hiện tại của người dùng bằng navigator.geolocation\n  // ----------------------------------------------------\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      setError('Geolocation không được hỗ trợ bởi trình duyệt này.');\n      setLoading(false);\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      const newPos = {\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      };\n      setPosition(newPos);\n      setLoading(false);\n    }, err => {\n      let errorMessage = `Lỗi Geolocation: ${err.message}. Sử dụng vị trí mặc định.`;\n      if (err.code === 1) {\n        errorMessage = 'Bạn đã từ chối cấp quyền chia sẻ vị trí. Sử dụng vị trí mặc định.';\n      }\n      setError(errorMessage);\n      setLoading(false);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0\n    });\n  }, []); // Chỉ chạy một lần khi component mount\n\n  // ----------------------------------------------------\n  // Phần Hiển thị (Render)\n  // ----------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"B\\u1EA3n \\u0110\\u1ED3 V\\u1ECB Tr\\xED Hi\\u1EC7n T\\u1EA1i \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"warning\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 23\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '600px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        sx: {\n          ml: 2\n        },\n        children: \"\\u0110ang t\\xECm v\\u1ECB tr\\xED c\\u1EE7a b\\u1EA1n...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: position // Sử dụng vị trí hiện tại (hoặc mặc định nếu lỗi)\n      ,\n      zoom: 14,\n      scrollWheelZoom: false,\n      style: CONTAINER_STYLE,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" // URL API của OSM\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MapController, {\n        center: position\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this), position.lat && position.lng && /*#__PURE__*/_jsxDEV(Marker, {\n        position: position,\n        title: \"V\\u1ECB tr\\xED c\\u1EE7a t\\xF4i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n_s2(MapComponent, \"fN25aeISRY6U/uhH8Tbujor7g2Q=\");\n_c2 = MapComponent;\nexport default MapComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapController\");\n$RefreshReg$(_c2, \"MapComponent\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","useMap","Box","Typography","Alert","CircularProgress","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","DEFAULT_CENTER","lat","lng","CONTAINER_STYLE","height","width","MapController","center","_s","map","setView","_c","MapComponent","_s2","position","setPosition","loading","setLoading","error","setError","navigator","geolocation","getCurrentPosition","pos","newPos","coords","latitude","longitude","err","errorMessage","message","code","enableHighAccuracy","timeout","maximumAge","sx","p","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","display","justifyContent","alignItems","ml","zoom","scrollWheelZoom","style","attribution","url","title","_c2","$RefreshReg$"],"sources":["D:/ITSS/frontend/src/page/Map.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { MapContainer, TileLayer, Marker, useMap } from 'react-leaflet';\r\nimport { Box, Typography, Alert, CircularProgress } from '@mui/material';\r\nimport 'leaflet/dist/leaflet.css'; // **RẤT QUAN TRỌNG: Import CSS của Leaflet**\r\n\r\n// Fix marker icon (Leaflet cần các đường dẫn tĩnh cho marker)\r\nimport L from 'leaflet';\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\r\n    iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\r\n    shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\r\n});\r\n\r\n// Vị trí mặc định (Ví dụ: Hà Nội)\r\nconst DEFAULT_CENTER = {\r\n    lat: 21.028511,\r\n    lng: 105.804817\r\n};\r\n\r\n// Style cho MapContainer\r\nconst CONTAINER_STYLE = {\r\n    height: '600px',\r\n    width: '100%'\r\n}\r\n\r\n// Component con để điều khiển bản đồ\r\nconst MapController = ({ center }) => {\r\n    const map = useMap(); // Hook để truy cập instance của bản đồ\r\n    \r\n    // Khi vị trí thay đổi, di chuyển bản đồ đến vị trí mới\r\n    useEffect(() => {\r\n        if (center.lat && center.lng) {\r\n            map.setView(center, 16); // Di chuyển và phóng to (zoom level 16)\r\n        }\r\n    }, [center, map]);\r\n\r\n    return null;\r\n};\r\n\r\nconst MapComponent = () => {\r\n    const [position, setPosition] = useState(DEFAULT_CENTER);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // ----------------------------------------------------\r\n    // Lấy vị trí hiện tại của người dùng bằng navigator.geolocation\r\n    // ----------------------------------------------------\r\n    useEffect(() => {\r\n        if (!navigator.geolocation) {\r\n            setError('Geolocation không được hỗ trợ bởi trình duyệt này.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n            (pos) => {\r\n                const newPos = {\r\n                    lat: pos.coords.latitude,\r\n                    lng: pos.coords.longitude,\r\n                };\r\n                setPosition(newPos);\r\n                setLoading(false);\r\n            },\r\n            (err) => {\r\n                let errorMessage = `Lỗi Geolocation: ${err.message}. Sử dụng vị trí mặc định.`;\r\n                if (err.code === 1) {\r\n                    errorMessage = 'Bạn đã từ chối cấp quyền chia sẻ vị trí. Sử dụng vị trí mặc định.';\r\n                }\r\n                setError(errorMessage);\r\n                setLoading(false);\r\n            },\r\n            {\r\n                enableHighAccuracy: true,\r\n                timeout: 5000,\r\n                maximumAge: 0\r\n            }\r\n        );\r\n    }, []); // Chỉ chạy một lần khi component mount\r\n\r\n    // ----------------------------------------------------\r\n    // Phần Hiển thị (Render)\r\n    // ----------------------------------------------------\r\n\r\n    return (\r\n        <Box sx={{ p: 3 }}>\r\n            <Typography variant=\"h4\" gutterBottom>Bản Đồ Vị Trí Hiện Tại </Typography>\r\n            \r\n            {error && <Alert severity=\"warning\" sx={{ mb: 2 }}>{error}</Alert>}\r\n            \r\n            {loading ? (\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '600px' }}>\r\n                    <CircularProgress />\r\n                    <Typography sx={{ ml: 2 }}>Đang tìm vị trí của bạn...</Typography>\r\n                </Box>\r\n            ) : (\r\n                <MapContainer\r\n                    center={position} // Sử dụng vị trí hiện tại (hoặc mặc định nếu lỗi)\r\n                    zoom={14} \r\n                    scrollWheelZoom={false}\r\n                    style={CONTAINER_STYLE}\r\n                >\r\n                    {/* 1. Lớp dữ liệu bản đồ (TileLayer) từ OpenStreetMap */}\r\n                    <TileLayer\r\n                        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" // URL API của OSM\r\n                    />\r\n                    \r\n                    {/* Component để điều khiển việc di chuyển bản đồ */}\r\n                    <MapController center={position} />\r\n                    \r\n                    {/* 2. Marker hiển thị vị trí người dùng */}\r\n                    {position.lat && position.lng && (\r\n                        <Marker position={position} title=\"Vị trí của tôi\" />\r\n                    )}\r\n\r\n                </MapContainer>\r\n            )}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}